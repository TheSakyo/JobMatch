<!-- Bandeau cookies moderne avec accessibilit√© am√©lior√©e -->
<div id="cookie-banner" class="cookie-banner" role="dialog" aria-labelledby="cookie-title" aria-describedby="cookie-description">
  <div class="cookie-content">
    <h2 id="cookie-title">üç™ Gestion des cookies</h2>
    <p id="cookie-description">
      JobMatch+ utilise des cookies pour am√©liorer votre exp√©rience, mesurer l'audience
      et personnaliser les offres d'emploi. Vous pouvez modifier vos pr√©f√©rences √† tout moment.
    </p>

    <div class="cookie-buttons">
      <button id="accept-all" type="button" aria-describedby="accept-all-desc">
        Tout accepter
      </button>
      <button id="reject-all" type="button" aria-describedby="reject-all-desc">
        Tout refuser
      </button>
      <button id="customize" type="button" aria-describedby="customize-desc">
        Personnaliser mes choix
      </button>
    </div>

    <div class="cookie-info">
      <p>
        üìú <strong>Votre choix sera conserv√© pendant 6 mois.</strong><br>
        <a href="https://www.cnil.fr/fr/cookies-et-traceurs-regles-a-respecter" 
           target="_blank" 
           rel="noopener noreferrer"
           aria-label="En savoir plus sur les cookies - Ouvre dans un nouvel onglet">
          En savoir plus sur les cookies (source CNIL)
        </a>
      </p>
    </div>

    <!-- Descriptions cach√©es pour l'accessibilit√© -->
    <div class="sr-only">
      <div id="accept-all-desc">Accepter tous les cookies incluant l'analyse, la personnalisation et la publicit√©</div>
      <div id="reject-all-desc">Refuser tous les cookies optionnels, garder seulement les cookies essentiels</div>
      <div id="customize-desc">Ouvrir les param√®tres d√©taill√©s pour choisir quels cookies accepter</div>
    </div>
  </div>

  <!-- Fen√™tre de personnalisation am√©lior√©e -->
  <div id="cookie-settings" class="cookie-settings hidden" aria-labelledby="settings-title">
    <h3 id="settings-title">‚öôÔ∏è Param√©trer mes choix de cookies</h3>
    
    <form id="cookiePreferencesForm" novalidate>
      <!-- Cookies essentiels (toujours actifs) -->
      <div class="cookie-preference-item">
        <label>
          <input type="checkbox" name="essential" checked disabled aria-describedby="essential-desc">
          <div class="cookie-preference-label">
            <div class="cookie-preference-title">Cookies essentiels</div>
            <div class="cookie-preference-desc" id="essential-desc">
              N√©cessaires au fonctionnement du site. Ces cookies ne peuvent pas √™tre d√©sactiv√©s.
            </div>
          </div>
        </label>
      </div>

      <!-- Cookies analytiques -->
      <div class="cookie-preference-item">
        <label>
          <input type="checkbox" name="analytics" checked aria-describedby="analytics-desc">
          <div class="cookie-preference-label">
            <div class="cookie-preference-title">Mesure d'audience</div>
            <div class="cookie-preference-desc" id="analytics-desc">
              Nous permettent de mesurer l'audience, les statistiques de fr√©quentation et d'utilisation afin d'am√©liorer notre service.
            </div>
          </div>
        </label>
      </div>

      <!-- Cookies de personnalisation -->
      <div class="cookie-preference-item">
        <label>
          <input type="checkbox" name="personalization" aria-describedby="personalization-desc">
          <div class="cookie-preference-label">
            <div class="cookie-preference-title">Personnalisation</div>
            <div class="cookie-preference-desc" id="personalization-desc">
              Permettent d'adapter le contenu et les offres d'emploi selon vos pr√©f√©rences et votre profil.
            </div>
          </div>
        </label>
      </div>

      <!-- Cookies publicitaires -->
      <div class="cookie-preference-item">
        <label>
          <input type="checkbox" name="ads" aria-describedby="ads-desc">
          <div class="cookie-preference-label">
            <div class="cookie-preference-title">Publicit√© cibl√©e</div>
            <div class="cookie-preference-desc" id="ads-desc">
              Utilis√©s pour vous proposer des publicit√©s pertinentes bas√©es sur vos centres d'int√©r√™ts.
            </div>
          </div>
        </label>
      </div>

      <div class="cookie-settings-buttons">
        <button type="submit" aria-describedby="save-desc">
          Enregistrer mes choix
        </button>
        <button type="button" id="back" aria-describedby="back-desc">
          Retour
        </button>
      </div>

      <!-- Descriptions cach√©es pour l'accessibilit√© -->
      <div class="sr-only">
        <div id="save-desc">Sauvegarder vos pr√©f√©rences de cookies et fermer ce panneau</div>
        <div id="back-desc">Revenir √† l'√©cran principal sans sauvegarder</div>
      </div>
    </form>
  </div>
</div>

<!-- Classe sr-only pour l'accessibilit√© -->
<style>
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
</style>
